<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quagga.js Example</title>
<script src="https://cdn.jsdelivr.net/npm/@ericblade/quagga2/dist/quagga.min.js"></script>
</head>
<body>
<div id="scanner-container"></div>
<button id="toggle-scanner">Start/Stop Scanner</button>

<script>
let scannerRunning = false;

function startScanner() {
Quagga.init({
inputStream: {
name: "Live",
type: "LiveStream",
target: document.querySelector('#scanner-container'),
constraints: {
width: 640,
height: 480,
facingMode: "environment"
}
},
decoder: {
readers: ["code_128_reader", "ean_reader"]
}
}, function(err) {
if (err) {
console.error(err);
return;
}
Quagga.start();
scannerRunning = true;
});

Quagga.onDetected(result => {
alert(`Barcode detected: ${result.codeResult.code}`);
});
}

document.getElementById("toggle-scanner").addEventListener("click", () => {
if (scannerRunning) {
Quagga.stop();
scannerRunning = false;
} else {
startScanner();
}
});
</script>
</body>
</html>