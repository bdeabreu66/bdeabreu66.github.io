<HTML>
<HEAD>
<TITLE>  Integral </TITLE>
<!-- <link rel="stylesheet" href="styles.css" > -->
<!-- <link rel="manifest" href="manifest.json">   -->

<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
<style>
'
input[type=number]{
width: 8em;
}

span {

font-size:2em;


}

input[type=text]{
font-size:2em;
width: 14em;
border: 2px solid red;
border-radius: 4px;
padding: 4px 4px;
  margin: 4px 0;
  box-sizing: border-box;
  background-color: #3CBC8D;
  color: white;
}

input[type=text]:focus {
  background-color: lightblue;
}
</style>

</HEAD>


<BODY>
<div id="datos">
</div>

<button onclick="procesar();">P</button>
n=<input id="n" type="number" value=100><br>

<select id="selector" onchange="desplegar()">;
<option selected > Integral simple </option>
<option> Integral doble </option>
<option> Integral triple </option>
<option> Integral de linea vectorial </option>
<option> Integral de linea escalar </option>
<option> Integral de Superficie vectorial </option>
<option> Integral de Superficie escalar </option>
<option> Gradiente (Cartesianas) </option>
<option> Divergencia (Cartesianas) </option>
<option> Rotor (Cartesianas) </option>


</select>

<div id="integral1" hidden="true"> 
 f(x)=<input id="f01" type="text"><br>
 lim inf <input id="a" type="text"><br>
 lim sup <input id="b" type="text"><br>
 <center><span id="ri1"></span></center> 
</div>

<div id="integral2" hidden="true"> 
 f(x,y)=<input id="f02" type="text"><br>
 B=<input id="Rxy" type="text"><br>
 Xmin=<input id="xmin2" type="text"><br>
 Xmax=<input id="xmax2" type="text"><br>
 Ymin=<input id="ymin2" type="text"><br>
 Ymax=<input id="ymax2" type="text"><br>
 <center><span id="ri2"></span></center> 
</div>

<div id="integral3" hidden="true"> 
f(x,y,z)=<input id="f03" type="text"><br>
W=<input id="Rxyz" type="text"><br>
 Xmin=<input id="xmin3" type="text"><br>
 Xmax=<input id="xmax3" type="text"><br>
 Ymin=<input id="ymin3" type="text"><br>
 Ymax=<input id="ymax3" type="text"><br>
 Zmin=<input id="zmin3" type="text"><br>
 Zmax=<input id="zmax3" type="text"><br>

 <center><span id="ri3"></span></center> 


</div>

<div id="ilinea1" hidden="true"> 
Introduzca ecuacion parametrica <br> 
 x=<input id="gtv0" type="text"><br>
 y=<input id="gtv1" type="text"><br>
 z=<input id="gtv2" type="text"><br>

Introduzca Campo vectorial <br>
 <input id="flv0" type="text"><br>
 <input id="flv1" type="text"><br>
 <input id="flv2" type="text"><br>
 tmin <input id="tmin" type="text"><br>
 tmax <input id="tmax" type="text"><br>
 <center><span id="ri4"></span></center> 

</div>

<div id="ilinea2" hidden="true"> 

Introduzca ecuacion parametrica <br> 
 x=<input id="gte0" type="text"><br>
 y=<input id="gte1" type="text"><br>
 z=<input id="gte2" type="text"><br>

Introduzca Campo escalar <br>
 <input id="fe0" type="text"><br>

 tmin <input id="tmine" type="text"><br>
 tmax <input id="tmaxe" type="text"><br>
 <center><span id="ri5"></span></center> 



</div>




<div id="isup1" hidden="true">
Introduzca ecuacion parametrica <br>
 x=<input id="gsv0" type="text"><br>
 y=<input id="gsv1" type="text"><br>
 z=<input id="gsv2" type="text"><br>

Introduzca Campo vectorial <br>
 <input id="fsv0" type="text"><br>
 <input id="fsv1" type="text"><br>
 <input id="fsv2" type="text"><br>

Introduzca Region de integracion (u,v) <br>
 <input id="Ruv" type="text">

 Umin=<input id="umin" type="text"><br>
 Umax=<input id="umax" type="text"><br>
 Vmin=<input id="vmin" type="text"><br>
 Vmax=<input id="vmax" type="text"><br>

 <center><span id="ri6"></span></center> 

</div>

<div id="isup2" hidden="true">
Introduzca ecuacion parametrica <br>
 x=<input id="gsv20" type="text"><br>
 y=<input id="gsv21" type="text"><br>
 z=<input id="gsv22" type="text"><br>

Introduzca Campo escalar <br>
 <input id="fse0" type="text"><br>

Introduzca Region de integracion (u,v) <br>
 <input id="Ruv2" type="text">

 Umin=<input id="umin2" type="text"><br>
 Umax=<input id="umax2" type="text"><br>
 Vmin=<input id="vmin2" type="text"><br>
 Vmax=<input id="vmax2" type="text"><br>
 <center><span id="ri7"></span></center> 
</div>

<div id="gradcart" hidden="true">
Introduzca Campo Escalar <br>
 f=<input id="gce" type="text"><br>
 <center><span id="ri8"></span></center> 
</div>

<div id="divcart" hidden="true">
Introduzca Campo Vectorial <br>
 f1=<input id="fd0" type="text"><br>
 f2=<input id="fd1" type="text"><br>
 f3=<input id="fd2" type="text"><br>
 <center><span id="ri9"></span></center> 
</div>

<div id="rotcart" hidden="true">
Introduzca Campo Vectorial <br>
 f1=<input id="fr0" type="text"><br>
 f2=<input id="fr1" type="text"><br>
 f3=<input id="fr2" type="text"><br>
 <center><span id="ri10"></span></center> 
</div>




</BODY>
<!--   -->
<script src="math.js" type="text/javascript"></script>

<script type="text/javascript">
var NN;
function desplegar(){
var sel=document.getElementById("selector").selectedIndex;
console.log(sel);
apagar();
if (sel==0) { document.getElementById("integral1").hidden=false}
if (sel==1) { document.getElementById("integral2").hidden=false}
if (sel==2) { document.getElementById("integral3").hidden=false}
if (sel==3) { document.getElementById("ilinea1").hidden=false}
if (sel==4) { document.getElementById("ilinea2").hidden=false}
if (sel==5) { document.getElementById("isup1").hidden=false}
if (sel==6) { document.getElementById("isup2").hidden=false}
if (sel==7) { document.getElementById("gradcart").hidden=false}
if (sel==8) { document.getElementById("divcart").hidden=false}
if (sel==9) { document.getElementById("rotcart").hidden=false}

}


function apagar(){

document.getElementById("integral1").hidden=true;
document.getElementById("integral2").hidden=true;
document.getElementById("integral3").hidden=true;
document.getElementById("ilinea1").hidden=true;
document.getElementById("ilinea2").hidden=true;
document.getElementById("isup1").hidden=true;
document.getElementById("isup2").hidden=true;
document.getElementById("gradcart").hidden=true;
document.getElementById("divcart").hidden=true;
document.getElementById("rotcart").hidden=true;

}

function escalar(v1,v2){
   return v1[0]*v2[0]+v1[1]*v2[1]+v1[2]*v2[2];
}


function pvectorial(v1,v2){
var v=[];
v[0]=v1[1]*v2[2]-v2[1]*v1[2];
v[1]=v1[2]*v2[0]-v2[2]*v1[0];
v[2]=v1[0]*v2[1]-v2[0]*v1[1];
return v
}

function normal(a,b){
var R=1;
var scope = {u:a,v:b}
var v1=[];
var v2=[];
v1[0]=gpu[0].evaluate(scope);
v1[1]=gpu[1].evaluate(scope);
v1[2]=gpu[2].evaluate(scope);
v2[0]=gpv[0].evaluate(scope);
v2[1]=gpv[1].evaluate(scope);
v2[2]=gpv[2].evaluate(scope);
return pvectorial(v1,v2);
}


function procesar(){
NN=parseInt(document.getElementById("n").value);

iniciar();
}



function iniciar(){
g=[];
gpu=[];
gpv=[];
gc=[];
F=[];
gpt=[];

var sel=document.getElementById("selector").selectedIndex;
if (sel==0) { 
var expr=document.getElementById("f01").value;
f01=math.compile(expr);
//f01=math.compile('x');

var a=document.getElementById("a").value;
var b=document.getElementById("b").value;
console.log(expr);
console.log(a);
console.log(b);

//console.log(integral1(math.evaluate(a),math.evaluate(b)))
var result=integral1(math.evaluate(a),math.evaluate(b))
document.getElementById("ri1").innerHTML=result;
}

if (sel==1) { 
var expr=document.getElementById("f02").value;
f01=math.compile(expr);
var reg=document.getElementById("Rxy").value;
Rxy=math.compile(reg);
var a=document.getElementById("xmin2").value;
var b=document.getElementById("xmax2").value;
var c=document.getElementById("ymin2").value;
var d=document.getElementById("ymax2").value;

//console.log(integral1(math.evaluate(a),math.evaluate(b)))
var result=integral2(math.evaluate(a),math.evaluate(b),math.evaluate(c),math.evaluate(d))
document.getElementById("ri2").innerHTML=result;
}
if (sel==2) { 

var expr=document.getElementById("f03").value;
f01=math.compile(expr);
var reg=document.getElementById("Rxyz").value;
Rxyz=math.compile(reg);

var a=document.getElementById("xmin3").value;
var b=document.getElementById("xmax3").value;
var c=document.getElementById("ymin3").value;
var d=document.getElementById("ymax3").value;
var e=document.getElementById("zmin3").value;
var f=document.getElementById("zmax3").value;

var result=integral3(math.evaluate(a),math.evaluate(b),math.evaluate(c),math.evaluate(d),math.evaluate(e),math.evaluate(f))
alert("result "+result);
document.getElementById("ri3").innerHTML=result;



//console.log(integral1(math.evaluate(a),math.evaluate(b)))

}


if (sel==3) { 

// integral de linea
var g0=document.getElementById("gtv0").value;
var g1=document.getElementById("gtv1").value;
var g2=document.getElementById("gtv2").value;

g[0]=math.compile(g0);
g[1]=math.compile(g1);
g[2]=math.compile(g2);

gpt[0]=math.compile(math.derivative(g0,'t').toString())
gpt[1]=math.compile(math.derivative(g1,'t').toString())
gpt[2]=math.compile(math.derivative(g2,'t').toString())

var fl0=document.getElementById("flv0").value;
var fl1=document.getElementById("flv1").value;
var fl2=document.getElementById("flv2").value;

F[0]=math.compile(fl0);
F[1]=math.compile(fl1);
F[2]=math.compile(fl2);

var a=document.getElementById("tmin").value;
var b=document.getElementById("tmax").value;
var result=int_linea(math.evaluate(a),math.evaluate(b))
alert("result "+result);
document.getElementById("ri4").innerHTML=result;
}




if (sel==4) { 
// integral de trayectoria
var g0=document.getElementById("gte0").value;
var g1=document.getElementById("gte1").value;
var g2=document.getElementById("gte2").value;

g[0]=math.compile(g0);
g[1]=math.compile(g1);
g[2]=math.compile(g2);

gpt[0]=math.compile(math.derivative(g0,'t').toString())
gpt[1]=math.compile(math.derivative(g1,'t').toString())
gpt[2]=math.compile(math.derivative(g2,'t').toString())

var fle=document.getElementById("fe0").value;

f0=math.compile(fle);

var a=document.getElementById("tmine").value;
var b=document.getElementById("tmaxe").value;
var result=int_tray(math.evaluate(a),math.evaluate(b))
document.getElementById("ri5").innerHTML=result;
}

if (sel==5) { 

var g0=document.getElementById("gsv0").value;
var g1=document.getElementById("gsv1").value;
var g2=document.getElementById("gsv2").value;

var fl0=document.getElementById("fsv0").value;
var fl1=document.getElementById("fsv1").value;
var fl2=document.getElementById("fsv2").value;

var reg=document.getElementById("Ruv").value;
Ruv=math.compile(reg);

g[0]=math.compile(g0);
g[1]=math.compile(g1);
g[2]=math.compile(g2);

F[0]=math.compile(fl0);
F[1]=math.compile(fl1);
F[2]=math.compile(fl2);

gpu[0]=math.compile(math.derivative(g0,'u').toString());
gpu[1]=math.compile(math.derivative(g1,'u').toString());
gpu[2]=math.compile(math.derivative(g2,'u').toString());

gpv[0]=math.compile(math.derivative(g0,'v').toString());
gpv[1]=math.compile(math.derivative(g1,'v').toString());
gpv[2]=math.compile(math.derivative(g2,'v').toString());

var a=document.getElementById("umin").value;
var b=document.getElementById("umax").value;
var c=document.getElementById("vmin").value;
var d=document.getElementById("vmax").value;

var result=int_sup(math.evaluate(a),math.evaluate(b),math.evaluate(c),math.evaluate(d))
alert("result "+result);
document.getElementById("ri6").innerHTML=result;






}

if (sel==6) { 

var g0=document.getElementById("gsv20").value;
var g1=document.getElementById("gsv21").value;
var g2=document.getElementById("gsv22").value;

var fl0=document.getElementById("fse0").value;

f0=math.compile(fl0);

var reg=document.getElementById("Ruv2").value;
Ruv=math.compile(reg);

g[0]=math.compile(g0);
g[1]=math.compile(g1);
g[2]=math.compile(g2);


gpu[0]=math.compile(math.derivative(g0,'u').toString());
gpu[1]=math.compile(math.derivative(g1,'u').toString());
gpu[2]=math.compile(math.derivative(g2,'u').toString());

gpv[0]=math.compile(math.derivative(g0,'v').toString());
gpv[1]=math.compile(math.derivative(g1,'v').toString());
gpv[2]=math.compile(math.derivative(g2,'v').toString());

var a=document.getElementById("umin2").value;
var b=document.getElementById("umax2").value;
var c=document.getElementById("vmin2").value;
var d=document.getElementById("vmax2").value;

var result=int_sup_2(math.evaluate(a),math.evaluate(b),math.evaluate(c),math.evaluate(d))
alert("result "+result);
document.getElementById("ri7").innerHTML=result;
}


if (sel==7) { 

var fl0=document.getElementById("gce").value;
var dx=math.derivative(fl0,'x').toString();
var dy=math.derivative(fl0,'y').toString();
var dz=math.derivative(fl0,'z').toString();
var result='grad F=['+dx+' , '+dy+' , '+dz+']'
document.getElementById("ri8").innerHTML=result;
}

if (sel==8) { 

var fl0=document.getElementById("fd0").value;
var fl1=document.getElementById("fd1").value;
var fl2=document.getElementById("fd2").value;
var div='('+math.derivative(fl0,'x').toString()+')+';
div+='('+math.derivative(fl1,'y').toString()+')+';
div+='('+math.derivative(fl2,'z').toString()+')';
result=math.simplify(div).toString();

document.getElementById("ri9").innerHTML=result;
}

if (sel==9) { 

var fl0=document.getElementById("fr0").value;
var fl1=document.getElementById("fr1").value;
var fl2=document.getElementById("fr2").value;
var rot1='('+math.derivative(fl2,'y').toString()+')-';
    rot1+='('+math.derivative(fl1,'z').toString()+')';
var rrot1=math.simplify(rot1).toString();

var rot2='('+math.derivative(fl0,'z').toString()+')-';
    rot2+='('+math.derivative(fl2,'x').toString()+')';

var rrot2=math.simplify(rot2).toString();

var rot3='('+math.derivative(fl1,'x').toString()+')-';
    rot3+='('+math.derivative(fl0,'y').toString()+')';
var rrot3=math.simplify(rot3).toString();

result='['+rrot1+','+rrot2+','+rrot3+']';

document.getElementById("ri10").innerHTML=result;

}


/*
gc[0]=math.compile(g[0]);
gc[1]=math.compile(g[1]);
gc[2]=math.compile(g[2]);


gpu[0]=math.compile(math.derivative(g[0],'u').toString());
gpu[1]=math.compile(math.derivative(g[1],'u').toString());
gpu[2]=math.compile(math.derivative(g[2],'u').toString());

gpv[0]=math.compile(math.derivative(g[0],'v').toString());
gpv[1]=math.compile(math.derivative(g[1],'v').toString());
gpv[2]=math.compile(math.derivative(g[2],'v').toString());

F=[];

F[0]=math.compile('z');
F[1]=math.compile('y');
F[2]=math.compile('x');

f=math.compile('x*z');
*/
}

function fogv2(a,b){
var scope = {
    u: a,
    v: b
}
var x=g[0].evaluate(scope);
var y=g[1].evaluate(scope);
var z=g[2].evaluate(scope);

var scope2= {
    x: x,
    y: y,
    z: z
}


var FG=[];

FG[0]=F[0].evaluate(scope2);
FG[1]=F[1].evaluate(scope2);
FG[2]=F[2].evaluate(scope2);

return FG;
}

function foge2(a,b){
var f1;
var scope = {
    u: a,
    v: b
}
var x=g[0].evaluate(scope);
var y=g[1].evaluate(scope);
var z=g[2].evaluate(scope);
var scope2= {x: x, y: y, z: z}
f1=f0.evaluate(scope2);
return f1;
}

function norma(v){
   return Math.sqrt(v[0]*v[0]+v[1]*v[1]+v[2]*v[2]);
}


function gp(t){
var v=[];
var scope={t:t}
v[0]= gpt[0].evaluate(scope);
v[1]= gpt[1].evaluate(scope);
v[2]= gpt[2].evaluate(scope);
return v;
}

function fog(t){
var v=[];
scope={t:t}
var x=g[0].evaluate(scope);
var y=g[1].evaluate(scope);
var z=g[2].evaluate(scope);

var scope2={x:x, y:y, z:z}

v[0]= F[0].evaluate(scope2);
v[1]= F[1].evaluate(scope2);
v[2]= F[2].evaluate(scope2);

return v;
}

function foge(t){
var v;
scope={t:t}
var x=g[0].evaluate(scope);
var y=g[1].evaluate(scope);
var z=g[2].evaluate(scope);
var scope2={x:x, y:y, z:z}
v=f0.evaluate(scope2);
return v;
}

function int_sup(u1,u2,v1,v2){
var nt=NN;

var du=(u2-u1)/nt;
var dv=(v2-v1)/nt;
var suma=0;
var u,v;
for (var i=1;i<=nt;i++){
     u=u1+(i-1)*du; 
 for (var j=1;j<=nt;j++){
       v=v1+(j-1)*dv;
       var scope={u:u,v:v};
     if (Ruv.evaluate(scope)) { 
         var N=normal(u,v);
         var F=fogv2(u,v);
         suma+=escalar(F,N);

       }

 }    
}
suma=suma*du*dv;
return suma;
}

function int_sup_2(u1,u2,v1,v2){
var nu=NN;
var nv=NN;

var du=(u2-u1)/nu;
var dv=(v2-v1)/nv;
var suma=0;
for (var i=1;i<=nu;i++){
  u=u1+(i-1)*du; 
  for (var j=1;j<=nv;j++){
       v=v1+(j-1)*dv;
       var scope={u:u,v:v};
       if (Ruv.evaluate(scope)) { 
          suma+=foge2(u,v)*norma(normal(u,v));
       }
       
   }    
}
suma=suma*du*dv;
return suma;
}


function int_linea(t1,t2){
var nt=NN;
var dt=(t2-t1)/nt;

var suma=0;
for (var i=1;i<=nt;i++){
      t=t1+(i-1)*dt;
      var scope={t:t}
          
     suma+=escalar(gp(t),fog(t))

      }    
suma=suma*dt;

return suma;
}

function int_tray(t1,t2){
var nt=NN;
var dt=(t2-t1)/nt;
var suma=0;
for (var i=1;i<=nt;i++){
      t=t1+(i-1)*dt;
     suma+=foge(t)*norma(gp(t));
      }    
suma=suma*dt;
return suma;
}
/*
function integral1(x1,x2){
var nx=NN;
var dx=(x2-x1)/nx;
var xa;
var suma=0;
for (var i=1;i<=nx;i++){
       xa=x1+(i-1)*dx;
       var scope ={x:xa} 
       suma+= f01.evaluate(scope);
} 
return suma*dx;
}
*/

//trapecio

function integral1(x1,x2){
var nx=NN;
var dx=(x2-x1)/nx;
var xa;
var scope={x:x1} 
var fa=f01.evaluate(scope);
var scope={x:x2} 
var fb=f01.evaluate(scope);
var suma=0;
for (var i=1;i<nx;i++){
       xa=x1+i*dx;
       var scope ={x:xa} 
       suma+= 2*f01.evaluate(scope);
} 
return (suma+fa+fb)*dx/2;
}

/*
function integral2(x1,x2,y1,y2){
var nx=NN;
var ny=NN;
var dx=(x2-x1)/nx;
var dy=(y2-y1)/ny;
var x,y,z;
var suma=0;
for (var i=1;i<=nx;i++){
  for (var j=1;j<=ny;j++){
       x=x1+(i-1)*dx;
       y=y1+(j-1)*dy;
       var scope={x:x ,y:y };
       if (Rxy.evaluate(scope)) {suma+=f01.evaluate(scope);}
   }
} 
return suma*dx*dy;
}
*/
// Trapecio
function integral2(x1,x2,y1,y2){
var nx=NN;
var ny=NN;
var dx=(x2-x1)/nx;
var dy=(y2-y1)/ny;
var x,y,z;
var suma=0;
for (var i=1;i<=nx;i++){
  for (var j=1;j<=ny;j++){
       x=x1+(i-1)*dx;
       y=y1+(j-1)*dy;
       var scope={x:x ,y:y };
       if (Rxy.evaluate(scope)) {
         suma+=f01.evaluate(scope);

        }
   }
} 
return suma*dx*dy;
}



function integral3(x1,x2,y1,y2,z1,z2){
var nx=NN;
var ny=NN;
var nz=NN;

var dx=(x2-x1)/nx;
var dy=(y2-y1)/ny;
var dz=(z2-z1)/nz;
alert("dx "+dx);
alert("dy "+dy);
alert("dz "+dz);

var x,y,z;
var suma=0;
for (var i=1;i<=nx;i++){
    x=x1+(i-1)*dx;
  for (var j=1;j<=ny;j++){
    y=y1+(j-1)*dy;
    for (var k=1;k<=nz;k++){
       z=z1+(k-1)*dz;
       var scope={x:x,y:y,z:z}
       if (Rxyz.evaluate(scope)) { suma+=f01.evaluate(scope);}
     }    
   }
} 
return suma*dx*dy*dz;
}

</script>


</html>