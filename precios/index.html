<HTML>
<HEAD>
<TITLE>  Precios Polar</TITLE>
<!-- <link rel="stylesheet" href="styles.css" > -->
<link rel="manifest" href="manifest.json"> 

<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
<style>

body{
font-size:30px;
}
input[type=number]{
width: 3em;
}

input[type=text]{
font-size:1em;
width: 8em;
border: 2px solid red;
border-radius: 4px;
padding: 4px 4px;
  margin: 4px 0;
  box-sizing: border-box;
  background-color: #3CBC8D;
  color: white;
}

input[type=text]:focus {
  background-color: lightblue;
}

p{
font-size:1.5rem;
background-color:black;
color:white;
padding:0px;
margin:0px;

}
td{
font-size:1.5rem;
padding:5px;
}
table{
margin:0px;
padding:0px;

}

#footer {
  position: fixed;
  left: 0;
  bottom: 0;
  width: 100%;
  background-color: blue;
  color: white;
  text-align: center;
  font-size:0.5em;
}

#header {
  position: fixed;
  left: 0;
  top: 0;
  width: 100%;
  background-color: blue;
  color: white;
  text-align: center;
  font-size:0.5em;
}
</style>

</HEAD>


<BODY onload="carga();">
<br>
<table>
<tr><td>Paralelo </td><td><input id="t1" type="text" value="0"></td></tr>
<tr><td>BCV </td><td><input id="t2" type="text" value="0"></td></tr>
</table>
<center>Lista de precios</center>

<div id="divt" >
</div>
<div id="factura" hidden="true"></div>
 <div id="footer"> Dr. Braulio De Abreu. email: brauliodeabreu@gmail.com <br> Tlfs: +58414 4728631 +58412 8552592</div>
 <div id="header"> <button onclick="refresca();">P</button> <button onclick="factura();">F</button> <button onclick="anula();">Z</button></div>


<!--   -->

<script type="text/javascript">

function carga(){
try {
document.getElementById("t1").value = localStorage.getItem('p1');
document.getElementById("t2").value = localStorage.getItem('p2');
} catch (error) 
{
  console.error(error);

}
divt=document.getElementById("divt");
fiva=7.25;
data=[];
var j=0;
data[j++]=["Pilsen,Light,Ice, 1/4",36,13.60,0,0,0,"t1"];
data[j++]=["Pilsen,Light,Ice, 1/3",24,13.60,0,0,0,"t1"];
data[j++]=["Solera 1/4",36,15.20,0,0,0,"t1"];
data[j++]=["Solera lata.250 x 24",24,17.6,0,0,0,"t1"];
data[j++]=["Solera lata.295 x 24",24,19.2,0,0,0,"t1"];
data[j++]=["Solera Nr.12",12,8.8,0,0,0,0,"t1"];
data[j++]=["Solera Nr.24",24,17.6,0,0,0,"t1"];
data[j++]=["Pilsen,Light,Ice Nr. 12  x 355",12,8.4,0,0,0,"t1"];
data[j++]=["Pilsen,Light,Ice Nr. 24  x 355",24,16.8,0,0,0,"t1"];
data[j++]=["Pilsen,Light,Ice Lata 295 x 24",24,16.8,0,0,0,"t1"];
data[j++]=["Pilsen,Light,Ice Lata 355 x 24",24,20.0,0,0,0,"t1"];
data[j++]=["Pilsen,Light,Ice.Lata 250 x 24",24,16.0,0,0,0,"t1"];
data[j++]=["Pilsen,Light,Ice.Lata 250 x 12",12,8.0,0,0,0,"t1"];

data[j++]=["Carore&ntilde;a",6,31.2,0,0,0,"t1"];
data[j++]=["Malta 1/4",36,7.2,1,0,0,"t1"];
data[j++]=["Malta Nr/Light.12",12,3.89,1,0,0,"t1"];
data[j++]=["Malta Nr/Light.24",24,7.78,1,0,0,"t1"];
data[j++]=["Malta Litr&oacute;n",6,8.12,1,0,0,"t1"];

data[j++]=["At&uacute;n",35,46.9,0,0,0,"t2"];
data[j++]=["Chef Oleina de Palma.1 Lt x 12",12,32.16,0,0,0,"t2"];
data[j++]=["Aceite 0.420lt x 24",24,31.68,0,0,0,"t2"];
data[j++]=["Aceite 1 lt x 12",12,32.16,0,0,0,"t2"];
data[j++]=["Arroz Clasico. 1 x 24 ",24,30.96,0,0,0,"t2"];
data[j++]=["Arroz Corina. 1 x 24 ",24,21.84,0,0,0,"t2"];
data[j++]=["Avena 30 x 200.Bolsa",30,23.1,0,0,0,"t2"];
data[j++]=["Avena 24 x 400.Bolsa",24,36.48,0,0,0,"t2"];
data[j++]=["Avena 12 x 800.Bolsa",12,31.56,0,0,0,"t2"];
data[j++]=["Avena(Harina).24x 400.Bolsa",24,40.92,0,0,0,"t2"];
data[j++]=["Crema/Arroz.24 x 450.Pote",24,25.2,0,0,0,"t2"];
data[j++]=["Crema/Arroz.34 x 225.Bolsa",34,17.75,0,0,0,"t2"];
data[j++]=["Crema/Arroz.24 x 450.Bolsa",24,19.2,0,0,0,"t2"];
data[j++]=["Crema/Arroz.12 x 900.Bolsa",12,15.12,0,0,0,"t2"];
data[j++]=["Crema/Arroz.12 x 900.Pote",12,19.8,0,0,0,"t2"];
data[j++]=["Detergente liq.BB.500 x 12",12,0,1,0,0,"t2"];
data[j++]=["Detergente liq.BB.1000 x 12",12,44.82,1,0,0,"t2"];
data[j++]=["Detergente liq.Floral.1000 x 12",12,0,1,0,0,"t2"];
data[j++]=["Gelatina Golden.96 gr x 10",10,11.6,1,0,0,"t2"];

data[j++]=["Harina Pan.1 k x 20",20,19.8,0,0,0,"t2"];
data[j++]=["Harina Pan/Arroz.1 k x 20",20,16.2,0,0,0,"t2"];

data[j++]=["Jabon Panela.Ext.Limp.250 x 36",36,20.04,1,0,0,"t2"];

data[j++]=["Jabon Panela.Floral.200 x 44",44,19.91,1,0,0,"t2"];

data[j++]=["Jabon Crema Multiuso.250x36",36,51.48,1,0,0,"t2"];

data[j++]=["Jabon Crema Multiuso.500x18",18,45.9,1,0,0,"t2"];

data[j++]=["Jabon Panela.Past.Multi.130x42",42,22.41,1,0,0,"t2"];

data[j++]=["Jabon Panela.BEBE.160 x 48",48,22.83,1,0,0,"t2"];

data[j++]=["Jabon Polvo.BEBE.400 x 30",30,34.45,1,0,0,"t2"];

data[j++]=["Jabon Polvo.BEBE.900 x 20",20,48.92,1,0,0,"t2"];

data[j++]=["KONGA",50,15.66,1,0,0,"t2"];

data[j++]=["Mantequilla Mavesa 500 x 12",12,19.44,0,0,0,"t2"];
data[j++]=["Mantequilla Mavesa 250 x 24",24,20.4,0,0,0,"t2"];
data[j++]=["Mantequilla Mavesa 1 K x 6",6,18.9,0,0,0,"t2"];
data[j++]=["Mantequilla Mavesa 5 K x 1.S/S",1,14.92,0,0,0,"t2"];
data[j++]=["Mantequilla Mavesa 5 K x 1.C/S",1,17.31,0,0,0,"t2"];
data[j++]=["Mantequilla Nelly 227 x 24",24,15.12,0,0,0,"t2"];
data[j++]=["Mantequilla Nelly.454 x 12",12,15.12,0,0,0,"t2"];
data[j++]=["Mayonesa 500 x 12",12,24.84,0,0,0,"t2"];
data[j++]=["Mayonesa 175 x 24",24,27.56,0,0,0,"t2"];
data[j++]=["Mayonesa 910 x 6",6,23.46,0,0,0,"t2"];
data[j++]=["Mayonesa(Aderezo).3,6 K x 4",4,57.0,0,0,0,"t2"];
data[j++]=["Mezcla/Cachapas.500 x 12",12,12.60,1,0,0,"t2"];




data[j++]=["Pasta 1/2 K x 12",12,13.32,1,0,0,"t2"];

data[j++]=["Pasta 1 K x 12",12,25.8,1,0,0,"t2"];

data[j++]=["Pasta Linguini. 1 K x 12",12,25.8,1,0,0,"t2"];

data[j++]=["Pepitonas.140 x 35",35,36.05,1,0,0,"t2"];

data[j++]=["Rikesa Trad.200 x 18",18,32.36,1,0,0,"t2"];

data[j++]=["Rikesa Trad.300 x 12",12,29.65,1,0,0,"t2"];

data[j++]=["Rikesa Blanco.200 x 18",18,32.36,1,0,0,"t2"];

data[j++]=["Salsa/Tomate.198 x 24",24,15.03,1,0,0,"t2"];

data[j++]=["Salsa/Tomate.397 x 24",24,25.06,1,0,0,"t2"];

data[j++]=["Salsa/Tomate. 4,2 x 4",4,40.37,1,0,0,"t2"];

data[j++]=["Sardina/Tom/Pic.170x 20",20,18.0,1,0,0,"t2"];

data[j++]=["Sardina/Aceite.170 x 20",20,20.88,1,0,0,"t2"];

data[j++]=["Super Can.4 K x 5",5,27.49,1,0,0,"t2"];

data[j++]=["Super Can.10 K x 1",1,12.44,1,0,0,"t2"];

data[j++]=["Super Can. 18 K x 1",1,21.31,1,0,0,"t2"];

data[j++]=["Dogourmet. Parrilla. 18 K x 1",1,33.43,1,0,0,"t2"];

data[j++]=["Toddy. 100 x 36. Bolsa",36,33.83,1,0,0,"t2"];

data[j++]=["Toddy. 1 k x 12. Bolsa",12,88.11,1,0,0,"t2"];

data[j++]=["Toddy. 400 x 24. Bolsa",24,79.62,1,0,0,"t2"];

data[j++]=["Toddy. 200 x 12. Pote",12,20.88,1,0,0,"t2"];

data[j++]=["Toddy. 400 x 12. Pote",12,39.81,1,0,0,"t2"];

data[j++]=["Toddy. Galleta. 6 x 6 x 24",24,7.52,1,0,0,"t2"];

data[j++]=["Vinagre. 1/2 lt x 24",24,14.20,1,0,0,"t2"];

data[j++]=["Vinagre. 1 lt x 12",12,12.53,1,0,0,"t2"];

data[j++]=["Vinagre. 4 lt x 4",4,16.56,1,0,0,"t2"];

data[j++]=["Yogurt. F y D. 125 x 24",24,27.00,1,0,0,"t2"];

data[j++]=["Yogurt. F y D. 250 x 24",24,47.61,1,0,0,"t2"];

data[j++]=["Yogurt. F y D. 750 x 12",12,59.86,1,0,0,"t2"];

refresca();
}
function actT(ind){
var valor=prompt("Introduzca cantidad", "");
if (valor!=null) {data[ind][5]=parseInt(valor);}
refresca();
console.log(ind);
}
function actU(ind){
var valor=prompt("Introduzca cantidad", "");
if (valor!=null) {data[ind][4]=parseInt(valor);}
refresca();

console.log(ind);
}

function factura(){
var texto="";
var totald=0;
var totalb=0;

for (var i=0;i<data.length;i++){
if (data[i][6]=="t1") {factor=t1;}
if (data[i][6]=="t2") {factor=t2;}
var Tdolar=data[i][4]*(data[i][2]/data[i][1]) + data[i][5]*(data[i][2]);


if (Tdolar!=0) { 
totald+=Tdolar;
totalb+=factor*Tdolar;
if (data[i][4]!=0) { texto+='<p style=" font-size:0.8em;" >'+ data[i][4] +'U '+ data[i][0]+'</p>';}
if (data[i][5]!=0) { texto+='<p style=" font-size:0.8em;" >'+ data[i][5] +'T  ' + data[i][0]+'</p>';}


texto+='<table width="100%"><tr><td>'+impri(Tdolar.toFixed(2))+' $'+'</td><td>'+impri((factor*Tdolar).toFixed(2))+' Bs'+'</td></tr></table>';}
}


texto+='<HR>';
texto+='<span style="color:yellow; font-size:1em;">Total: </span>'+impri(totald.toFixed(2))+' $ <br>  ';
texto+=impri(totalb.toFixed(2))+' Bs';

var textoT="";
divfactura=document.getElementById("factura")
divfactura.style="position: fixed;top :15px; left: 2px; overflow-y: auto; width: 95% ; height: 80%; background-color: green;color:white; border: 3px solid #73AD21;";
textoT+='<div style="position: fixed; text-align:right;background-color: gray;width:95%;">';
textoT+=' <button  title="Salir" onclick="quitar();" > x </button></div> <br> <br>';
textoT+='<div style="color:black; font-size:0.8em;">'+texto+'</div>';
divfactura.innerHTML=textoT;
divfactura.hidden=false;
}

function anula(){

for (var i=0;i<data.length;i++){
data[i][4]=0;
data[i][5]=0;
}
refresca();
}

function quitar(){
var div5 = document.getElementById("factura");
div5.hidden=true;
}

function refresca(){
t1=document.getElementById("t1").value;
t2=document.getElementById("t2").value;
localStorage.setItem('p1',t1);
localStorage.setItem('p2',t2);
texto="";
var factor;
for (var i=0;i<data.length;i++){
if (data[i][6]=="t1") {factor=t1;}
if (data[i][6]=="t2") {factor=t2;}
//console.log(i+" "+data[i][0]);
texto+='<p  >'+ data[i][0]+'</p>';
texto+='<table><tr><td> U '+impri((data[i][2]/data[i][1]).toFixed(2))+' $' +'</td><td>'+ impri(((data[i][2]/data[i][1])*factor).toFixed(2))+ ' Bs <button onclick="actU('+i+');">'+data[i][4]+'</button></td></tr>';
texto+='<tr><td> T '+impri(data[i][2].toFixed(2))+' $'+'</td><td>'+ impri((data[i][2]*factor).toFixed(2))+ ' Bs <button onclick="actT('+i+');">'+data[i][5]+'</button></td></tr></table>';
   if (data[i][3]==1) {
    texto+="<span style='font-size:0.6em;'>Retenci&oacute;n T: "+impri((data[i][2]/fiva).toFixed(2))+" $ "+impri((data[i][2]*factor/fiva).toFixed(2))+" Bs          </span>";
   }
}
texto+='<br><br>'
divt.innerHTML=texto;
}
function impri(A){
var At=A.toString();
var p=At.indexOf('.');
var num=At.substring(0,p);
var dec=At.substring(p+1,At.length);
//console.log(p+" "+num+" "+dec);
var B="";
var j=0;
var indfin=num.length
var porc=[];
while (indfin>0) {
porc[j]=num.substring(indfin-3,indfin);
indfin=indfin-3;
j=j+1;
}

for(var j=porc.length-1;j>0;j--)
{
B=B+porc[j]+".";
}
B=B+porc[0]+","+dec
//console.log(B);
return B;
}
impri(12356.3478);

</script>
<script>

// Registra el service worker
if ('serviceWorker' in navigator) {
  window.addEventListener('load', function() {
    navigator.serviceWorker.register('sw.js').then(function(registration) {
      // Si es exitoso
      console.log('SW registrado correctamente');
    }, function(err) {
      // Si falla
      console.log('SW fallo', err);
    });
  });
}
</script>
</BODY>
</html>