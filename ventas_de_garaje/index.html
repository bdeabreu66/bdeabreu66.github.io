<HTML>
<HEAD>
<TITLE>  Ventas de Garaje</TITLE>
<!-- <link rel="stylesheet" href="styles.css" > -->
<link rel="manifest" href="manifest.json"> 

<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
<style>

body{
font-size:30px;
}
input[type=number]{
width: 3em;
}


.btop{

font-size:2em;

}

.btn2{

font-size:1em;

}


#dsearch {
position:relative;
}

#enc {
position:relative;
}

#divt {
position:fixed;
height: 60%;
width:95%;
overflow-y:scroll;
}

input[type=text]{
font-size:1em;
width: 8em;
border: 2px solid red;
border-radius: 4px;
padding: 4px 4px;
  margin: 4px 0;
  box-sizing: border-box;
  background-color: #3CBC8D;
  color: white;
}

input[type=text]:focus {
  background-color: lightblue;
}

p{
font-size:1.5rem;
background-color:black;
color:white;
padding:0px;
margin:0px;

}
td{
font-size:1.5rem;
padding:1px;
}
table{
margin:0px;
padding:0px;

}

#footer {
  display: none;
  position: fixed;
  left: 0;
  bottom: 0;
  width: 100%;
  background-color: blue;
  color: white;
  text-align: center;
  font-size:0.5em;
}

#header {
  position: fixed;
  left: 0;
  top: 0;
  width: 100%;
  background-color: blue;
  color: white;
  text-align: center;
  font-size:0.5em;
}
</style>

</HEAD>


<BODY onload="carga();">

<br>


<table >
<tr><td>Paralelo </td><td><input id="t1" type="text" value="0"></td></tr>
<tr><td>BCV </td><td><input id="t2" type="text" value="0"></td></tr>
<!-- <tr><td><input id="t3" onchange="camb();" type="checkbox" value="Automatico"><label for="t3"> Automatico </label></td></tr> -->
</table>
<center>Lista de precios <br><span id="fecha_p" style="font-size:1em;"></span></center>
</div>
<div id="dsearch">
<input id="search" type="text" oninput="refresca();"> Buscar
</div>
<div id="divt" >
</div>
<div id="content" hidden="false"></div>
<div id="factura" hidden="true">

</div>
 <div id="footer"> Dr. Braulio De Abreu. email: brauliodeabreu@gmail.com <br> Tlfs: +58414 4728631 +58412 8552592</div>
 <div id="header"> <button class="btop" onclick="Actualiza_dolar();">A</button>&nbsp&nbsp<button class="btop" onclick="refresca();">P</button>&nbsp&nbsp<button class="btop" onclick="factura();">F</button>&nbsp&nbsp <button class="btop" onclick="anula();">Z</button></div>


<!--   -->

<script type="text/javascript">
var dist="Distribuidora Pita-Orozco"
var hoy=new Date();
function camb(){
var va=document.getElementById("t3").checked; 
console.log('va '+va);
localStorage.setItem('p3',va);
}
function carga(){
data=[];

try {
document.getElementById("t1").value = localStorage.getItem('p1');
document.getElementById("t2").value = localStorage.getItem('p2');
document.getElementById("fecha_p").innerText = localStorage.getItem('FECHA_P');
//document.getElementById("t3").checked = localStorage.getItem('p3');
} catch (error) 
{
  console.error(error);

}

try {
data=eval(localStorage.getItem('data'));

} catch (error) 
{
  console.log(error);

}



//var fecha=document.getElementById("fecha");
//fecha.innerHTML="V 0.1 13/10/2021";
divt=document.getElementById("divt");
fiva=7.25;

var j=0;
//var btn=document.getElementById("btnc");
//console.log(btn);
//btn.addEventListener('click', function(){
//     console.log('paso');},false);

//btn.onclick=function(){ console.log('paso');};



data= [["Vacio de cerveza Ret 222 ml x 36 UN",1,3.36,0,0,0,"t1"],
      ["Vacio de cerveza Ret 330 ml x 24 UN",1,3.36,0,0,0,"t1"],
      ["Gavera de cerveza Ret 222 ml x 36 UN",1,0.87,0,0,0,"t1"],
      ["Gavera de cerveza Ret 333 ml x 24 UN",1,0.87,0,0,0,"t1"],
      ["Botella de cerveza Ret 222 ml ",1,0.07,0,0,0,"t1"],
      ["Botella de cerveza Ret 333 ml ",1,0.11,0,0,0,"t1"],
      ["Pilsen Ret 222 ml x 36 UN",36,14.4,0,0,0,"t1"],
      ["Pilsen Ret 330 ml x 24 UN",24,14.4,0,0,0,"t1"],
      ["Pilsen lata 250 ml x 24 UN",24,16.0,0,0,0,"t1"],
      ["Solera Light Ret 222 ml x 36 UN",36,16.00,0,0,0,"t1"],
      ["Solera Ret 222 ml x 36 UN",36,16.00,0,0,0,"t1"],
      ["Solera NR 300 ml x 24 UN",24,14.40,0,0,0,"t1"],
      ["Solera Light NR 300 ml x 24 UN",24,14.40,0,0,0,"t1"],
      ["Solera NR 300 ml x 12 UN",12,7.20,0,0,0,"t1"],
      ["Solera Light NR 300 ml x 12 UN",12,7.20,0,0,0,"t1"],
      ["Light Ret 222 ml x 36 UN",36,14.4,0,0,0,"t1"],
      ["Light NR 355 ml x 12 UN",12,8.17,0,0,0,"t1"],
      ["Light Lata 250 ml x 12 UN",12,7.99,0,0,0,"t1"],
      ["Solera IPA Ret 222 ml x 36 UN",36,16.00,0,0,0,"t1"],
      ["Solera Kriek Ret 222 ml x 36 UN",36,16.0,0,0,0,"t1"],
      ["Solera IPA NR 222 ml x 12 UN",12,7.20,0,0,0,"t1"],
      ["Solera Kriek NR 222 ml x 12 UN",12,7.20,0,0,0,"t1"],
      ["Carorena 6 unid",6,36.01,0,0,0,"t1"],
      ["Carorena verano x 36",36,32.01,0,0,0,"t1"],
      ["Malta 1/4",36,8.26724,1,0,0,"t1"],
      ["Malta Nr/Light.12",12,4.0689,1,0,0,"t1"],
      ["Malta Litron 6 und",6,8.4827,1,0,0,"t1"],
      ["H201 Aceite Mazeite 1 lt x 12",12,39.48,0,0,0,"t2"],
      ["M324 Dogourmet Parrilla. 18 Kg x 1U",1,30.67,1,0,0,"t2"],      
      ["M326 Dogourmet Parrilla. 2 Kg x 6U",6,27.42,1,0,0,"t2"],
      ["M329 Dogourmet Cachorros 18 Kg x 1",1,34.54,1,0,0,"t2"],
      ["M330 Dogourmet Cachorros 2 Kg x 6U",6,30.48,1,0,0,"t2"],
      ["M338 Dogourmet Parrilla. 4 Kg x 5U",5,40.15,1,0,0,"t2"],
      ["M340 Super Can.carne hueso 4 Kg x 5U",5,29.8,1,0,0,"t2"],
      ["M033 Super Can.carne hueso 18 Kg x 1",1,23.05,1,0,0,"t2"],
      ["M034 Super Can. pollo 18 Kg x 1",1,23.05,1,0,0,"t2"],
      ["M347 Dogourmet Parrilla. 1 Kg x 10U",10,24.00,1,0,0,"t2"],
      ["M800 Super Can. carne hueso 2 Kg x 6U",6,18.18,1,0,0,"t2"],
      ["M802 Super Can.carne hueso 10 Kg x 1",1,13.46,1,0,0,"t2"],
      ["M803 Dogourmet Cachorros 10 Kg x 1U ",1,19.23,1,0,0,"t2"],
      ["M806 Dogourmet Parrilla. 10 Kg x 1U",1,17.53,1,0,0,"t2"],
      ["M339 Dogourmet Pollo brasa. 4 Kg x 5U",5,40.15,1,0,0,"t2"],
      ["H300 Arroz Clasico. 1 Kg x 24 ",24,26.88,0,0,0,"t2"],
      ["H364 Arroz Corina. 1 Kg x 24 ",24,19.68,0,0,0,"t2"],
      ["D362 Atun en aceite 140g x 35",35,48.65,1,0,0,"t2"],
      ["Q001 Avena Quaker Original (Bolsa) 400g x 24",24,36.72,0,0,0,"t2"],
      ["Q002 Avena Quaker Original (Bolsa) 800g x 12",12,31.80,0,0,0,"t2"],
      ["Q023 Harina Avena Quaker (Bolsa) 400g x 24",24,22.8,0,0,0,"t2"],
      ["Q464 Avena fortificada 100g x 48",48,19.2,0,0,0,"t2"],     
      ["Q465 Avena fortificada 200g x 30",30,23.1,0,0,0,"t2"],
      ["Q064 Avena fortificada 400g x 24",24,36.72,0,0,0,"t2"],
      ["Q065 Avena fortificada 800g x 12",12,31.80,0,0,0,"t2"],
      ["Q134 Avena Vainilla casera 400g x 24",24,36.72,0,0,0,"t2"],
      ["Q135 Avena Sirop de Maple 400g x 24",24,36.72,0,0,0,"t2"],
      ["Q136 Avena Orignal (Bolsa) 100g x 48",48,19.20,0,0,0,"t2"],
      ["Q005 Avena( Don Pancho) 400g x 24",24,23.76,1,0,0,"t2"],
      ["Q113 KONGA SABOR LIMON 30gx8x14",14,5.043,1,0,0,"t2"],
      ["Q114 KONGA SABOR NARANJA 30gx8x14",14,5.043,1,0,0,"t2"],
      ["Q115 KONGA SABOR MORA 30gx8x14 ",14,5.043,1,0,0,"t2"],
      ["Q123 KONGA SABOR PARCHITA 30gx8x14",14,5.043,1,0,0,"t2"],
      ["H172 Pan/Mezcla cachapas 500g x 12",12,14.28,0,0,0,"t2"],
      ["H330 Primor Crema/Arroz Enriq 450g x 24 Pote",24,28.56,0,0,0,"t2"],
      ["H331 Primor Crema/Arroz Enriq 900g x 12 Pote",12,22.44,0,0,0,"t2"],
      ["H369 Primor Crema/Arroz (Bolsa) 225g x 34",34,17.00,0,0,0,"t2"],
      ["H370 Crema/Arroz.(Bolsa) Enriq 450g x 24",24,21.60,0,0,0,"t2"],
      ["H371 Crema/Arroz.(Bolsa) Enrriq( 900g x 12 Bolsa",12,17.16,0,0,0,"t2"],
      ["Q099 Toddy. Chips Galleta (24gx6)x24 ",24,6.96,1,0,0,"t2"],
      ["Q101 Gelatina Golden Fresa 96 gr x 10U",10,10.78,1,0,0,"t2"],
      ["Q102 Gelatina Golden Kolita 96 gr x 10U",10,10.78,1,0,0,"t2"],
      ["Q107 Gelatina Golden Frambuesa 96 gr x 10U",10,10.78,1,0,0,"t2"],
      ["H135 Harina Pan tradicional 1 k x 20",20,21.20,0,0,0,"t2"],
      ["H136 Harina Pan Amarilla k x 20",20,21.20,0,0,0,"t2"],
      ["H173 Harina Pan/Arroz.1 k x 20",20,18.40,0,0,0,"t2"],
      ["T060 Salsa/Tomate.198 x 24",24,13.68,1,0,0,"t2"],
      ["T061 Salsa/Tomate.397 x 24",24,21.93,1,0,0,"t2"],
      ["T449 Salsa/Tomate. 4,2 x 4",4 ,35.24,1,0,0,"t2"],
      ["T076 Chef Margarina 5 K x 1.C/S",1,15.85,0,0,0,"t2"],
      ["T080 Chef Margarina 5 K x 1.S/S",1,15.85,1,0,0,"t2"],
      ["T084 Mantequilla Mavesa 1 K x 6",6,20.1,1,0,0,"t2"],
      ["T086 Mantequilla Mavesa 500g x 12",12,20.64,0,0,0,"t2"],
      ["T572 Mantequilla Mavesa 250g x 24",24,21.84,0,0,0,"t2"],
      ["T576 Mantequilla Nelly CR 400g x 12",12,17.76,0,0,0,"t2"],
      ["T587 Mantequilla Nelly CR 250g x 24",24,16.80,0,0,0,"t2"],
      ["T588 Mantequilla Nelly CR 500g x 12",12,17.88,0,0,0,"t2"],
      ["T018 Mayonesa 910g x 6",6,27.24,0,0,0,"t2"],
      ["T020 Mayonesa 445g x 12",12,29.04,0,0,0,"t2"],
      ["T393 Mayonesa 445g x 12 ND",12,29.04,0,0,0,"t2"],
      ["T486 Mayonesa(Aderezo) 3,6 kg x 4",4,66.24,1,0,0,"t2"],
      ["T573 Mayonesa 175g x 24",24,27.36,0,0,0,"t2"],
      ["T574 Mayonesa limon  445 g x 12",12,29.04,1,0,0,"t2"],
      ["T001 Toddy. 1 Kg x 12U Bolsa",12,78.96,1,0,0,"t2"],
      ["T002 Toddy. 2 Kg x 8U. Bolsa",8,98.56,1,0,0,"t2"],
      ["T003 Toddy. 400g x 24U Bolsa",24,71.28,1,0,0,"t2"],
      ["T007 Toddy. 400g x 12U Pote",12,35.64,1,0,0,"t2"],
      ["T472 Toddy. 200g x 12U Pote",12,18.84,1,0,0,"t2"],
      ["T568 Toddy. 100g x 36U Bolsa",36,30.24,1,0,0,"t2"],
      ["T427 Aceite Chef Oleina de Palma.18 Lt x 1U",1,58.38,0,0,0,"t2"],
      ["T584 Aceite Super Oleina de Palma.1 Lt x 12U",12,42.36,0,0,0,"t2"],
      ["H500 Pasta corta dedales 1 K x 12U",12,15.96,0,0,0,"t2"],
      ["H501 Pasta corta tornillo 1 K x 12U",12,15.96,0,0,0,"t2"],
      ["H506 Pasta corta plumitas 1 K x 12U",12,15.96,0,0,0,"t2"],
      ["H509 Pasta corta dedales 500g x 12U",12,8.16,0,0,0,"t2"],
      ["H516 Pasta larga vermicelli 500g x 12U",12,8.16,0,0,0,"t2"],
      ["H517 Pasta larga spaguetti 500g x 12U",12,8.16,0,0,0,"t2"],
      ["H689 Pasta larga vermicelli 1 K x 12U",12,15.96,0,0,0,"t2"],
      ["H690 Pasta larga spaguetti 1 K x 12U",12,15.96,0,0,0,"t2"],
      ["H1804 Pasta larga Linguini. 1 K x 12U",13,15.96,0,0,0,"t2"],
      ["D366 Pepitonas picantes 140g x 35 ",35,38.5,1,0,0,"t2"],
      ["D388 Bonito en aceite 140g x 35",35,43.40,1,0,0,"t2"],
      ["D389 Bonito con vegetales  165g x 24",24,35.04,1,0,0,"t2"],
      ["T499 Rikesa Trad.200 x 18",18,31.86,1,0,0,"t2"],
      ["T500 Rikesa Trad.300 x 12",12,29.4,1,0,0,"t2"],
      ["T501 Rikesa Tocineta.300 x 12",12,29.4,1,0,0,"t2"],
      ["T564 Rikesa Blanco.200g x 18U",18,31.86,1,0,0,"t2"],
      ["T565 Rikesa Parmesano 200g x 18U",18,31.86,1,0,0,"t2"],
      ["D384 Sardina Aceite.170 x 20",20,16.2,0,0,0,"t2"],
      ["D385 Sardina Picante.170x 20",20,16.2,0,0,0,"t2"],
      ["D386 Sardina Tomate.170x 20",20,16.2,0,0,0,"t2"],
      ["T297 Mermelada Vienesa Fresa 240g x 18U",18,27.72,1,0,0,"t2"],
      ["T298 Mermelada Vienesa Guayaba 240g x 18U",18,27.72,1,0,0,"t2"],
      ["T583 Mermelada Vienesa Fresamora 240g x 18U",18,27.72,1,0,0,"t2"],
      ["T048 Vinagre. 1 lt x 12",12,11.16,0,0,0,"t2"],
      ["T049 Vinagre. 1/2 lt x 24",24,12.96,0,0,0,"t2"],
      ["T533 Vinagre. 4 lt x 4",4,17.14,8,0,0,"t2"],
      ["Y001 Yogurt Fruta Fresa Migurt 125gx24",24,25.2,1,0,0,"t2"],
      ["Y002 Yogurt Fruta Durazno Migurt 125 x 24",24,25.2,1,0,0,"t2"],
      ["Y004 Yogurt Fruta Fresa Migurt 250 x 24",24,44.88,1,0,0,"t2"],
      ["Y005 Yogurt Fruta durazno Migurt 250 x 24",24,44.88,1,0,0,"t2"],
      ["Y007 Yogurt Fruta Fresa Migurt 750 x 12",12,55.92,1,0,0,"t2"],
      ["Y008 Yogurt Fruta Durazno Migurt 750 x 12",12,55.92,1,0,0,"t2"],
      ["Y009 Yogurt sabor dulce Migurt 750 x 12",12,55.92,1,0,0,"t2"],
      ["Y036 Yogurt sabor fresa Migurt 125 x 24",24,24.24,1,0,0,"t2"],
      ["L260 Las llaves Detergente Bebe 400g x 30",30,35.43,1,0,0,"t2"],
      ["L082 Las llaves Detergente Floral 900g x 20",20,52.07,1,0,0,"t2"],
      ["L255 Las llaves Detergente Bebe 900g x 20",20,52.07,1,0,0,"t2"],
      ["L350 Las llaves Detergente liq.Bebe 1L x 12",12,46.32,1,0,0,"t2"],
      ["L367 Las llaves Detergente liq.ROPA DELI.510cc x 12",12,25.8,1,0,0,"t2"],
      ["L382 Multiclean Detergente Frag citrica 900g x 20",20,27,1,0,0,"t2"],
      ["L207 Llaves Panela Trad Floral 250 x 36",36,24.12,1,0,0,"t2"],
      ["L275 Jabon Panela.BEBE.160 x 48",48,26.4,1,0,0,"t2"],
      ["L376 Jabon Panela.Floral.200 x 44",44,24.2,1,0,0,"t2"],
      ["L379 LLaves Lav. Antib liq. 500cc x 18",18,42.12,1,0,0,"t2"],
      ["L371 LLaves Limp. Marea Cristalina 1L x 12",12,23.16,1,0,0,"t2"],
      ["L372 LLaves Limp. Brisa Tropical 1L x 12",12,23.16,1,0,0,"t2"],
      ["L377 LLaves Limp. Marea Cristalina 500cc  x 24",24,26.16,1,0,0,"t2"],
      ["L378 LLaves Limp. Brisa Tropical 500cc x 24U",24,26.16,1,0,0,"t2"],
      ["L385 LLaves Limp. Bosque sereno 500cc x 24U",24,26.16,1,0,0,"t2"], 
      ["L386 LLaves Limp. Bosque sereno 1 lt x 12U",12,23.04,1,0,0,"t2"], 
      ["L357 Jabon Crema Multiuso.250g x 36U",36,51.12,1,0,0,"t2"],
      ["L358 Jabon Crema Multiuso.500g x 18U",18,46.08,1,0,0,"t2"],
      ["L373 Jabon pastilla Multiuso 130g x 42U",42,27.3,1,0,0,"t2"],
      ["L374 Las llaves Suavizante Bebe  950cc x 12U",12,32.76,1,0,0,"t2"],
      ["L380 Las llaves Suavizante Bebe 530cc x 12U",12,19.68,1,0,0,"t2"]
      ];
refresca();
}
function actT(ind){
var valor=prompt("Introduzca cantidad", "");
if (valor!=null) {data[ind][5]=parseInt(valor);}
refresca();
console.log(ind);
}
function actU(ind){
var valor=prompt("Introduzca cantidad", "");
if (valor!=null) {data[ind][4]=parseInt(valor);}
refresca();

console.log(ind);
}
var factflag=true;
function factura(){
if (factflag) {factflag=false; factura2(); } else { factflag=true; quitar()};

}
var Ftexto;

function fecha_actual(){
var mes=(hoy.getMonth()+1).toString();
if (mes.length==1) {mes='0'+mes}
return (hoy.getDate()).toString() + '/' +mes + '/' +hoy.getFullYear().toString()

}
function factura2(){
var texto='Fecha: '+fecha_actual()+'<br>';
texto+=dist+'<br>';
texto+='$ Paralelo: '+  impri(document.getElementById("t1").value) +'<br>';
texto+='$ BCV: '+  impri(document.getElementById("t2").value) +'<br>';
texto+="<center>F&aacute;ctura</center>";
var totald=0;
var totalb=0;
Ftexto='Fecha: '+fecha_actual()+'\n';
Ftexto+=dist+'\n';
Ftexto+='$ Paralelo: '+  impri(document.getElementById("t1").value) +'\n';
Ftexto+='$ BCV: '+  impri(document.getElementById("t2").value) +'\n';
Ftexto+="FACTURA\n"
for (var i=0;i<data.length;i++){
if (data[i][6]=="t1") {factor=t1;}
if (data[i][6]=="t2") {factor=t2;}
if (data[i][3]==1) {fm=1.16;} else {fm=1;}
//var pu=Math.ceil(100*fm*data[i][2]/data[i][1])/100;
var pu=+(fm*data[i][2]/data[i][1]).toFixed(2);
var pb=+(fm*data[i][2]).toFixed(2);
//if (data[i][3]==1) { pb=pu*data[i][1];} else { pb=data[i][2];}
//var Tdolar=data[i][4]*(fm*data[i][2]/data[i][1]) + data[i][5]*fm*(data[i][2]);
var Tdolar=data[i][4]*(pu) + data[i][5]*pb;
if (Tdolar!=0) { 
  totald+=Tdolar;
  totalb+=factor*Tdolar;
  Ftexto+='------------\n';
  if (data[i][4]!=0) { 
         texto+='<p style=" font-size:0.8em;" >'+ data[i][4] +'U '+ data[i][0]+'</p>';
         Ftexto+=data[i][4] +'U '+ data[i][0]+'\n';
//  console.log('pu:'+pu);

  }
  if (data[i][5]!=0) 
    { texto+='<p style=" font-size:0.8em;" >'+ data[i][5] +'B  ' + data[i][0]+'</p>';
        Ftexto+=data[i][5] +'B '+ data[i][0]+'\n';;
    }
  texto+='<table width="100%"><tr><td>'+Tdolar.toFixed(2)+' $'+'</td><td>'+(factor*Tdolar).toFixed(2)+' Bs'+'</td></tr></table>';
   Ftexto+=Tdolar.toFixed(2)+' $'+"    "+(factor*Tdolar).toFixed(2)+' Bs'+'\n'


if (data[i][3]==1) { 
  var fr=data[i][5]+ data[i][4]/data[i][1]; 
  texto+='Retencion: '+  (fr*pb/fiva).toFixed(2)+' $ '+(fr*pb*factor/fiva).toFixed(2)+ ' Bs';
  Ftexto+='Retencion: '+  (fr*pb/fiva).toFixed(2)+' $ '+(fr*pb*factor/fiva).toFixed(2)+ ' Bs\n';
}

}
}


texto+='<HR>';
Ftexto+='============================================\n';
texto+='<span style="color:yellow; font-size:1em;">Total: </span>'+impri(totald.toFixed(2))+' $ <br>';
texto+=impri(totalb.toFixed(2))+' Bs';
Ftexto+='Total:'+impri(totald.toFixed(2))+'$ \n'
Ftexto+=impri(totalb.toFixed(2))+' Bs';
console.log(Ftexto);
var textoT='<div style="position: fixed; text-align:right;background-color: gray;width:95%;">';
textoT+='<button style="font-size: 0.9em;" title="Compartir" id="btnc" onclick="compartir();"> C </button> <button  style="font-size: 0.9em;" title="Salir" onclick="quitar();" > x </button></div><br>';
divfactura=document.getElementById("factura")
divfactura.style="position: fixed;top :35px; left: 2px; overflow-y: auto; width: 95% ; height: 80%; background-color: green;color:white; border: 3px solid #73AD21;";
//textoT+='<div style="position: fixed; text-align:right;background-color: gray;width:95%;">';
//textoT+=' <button  title="Compartir" id="btn" onclick="compartir();" > C </button> <button  title="Salir" onclick="quitar();" > x </button></div> <br> <br>';
textoT+='<div style="color:black; font-size:0.8em;">'+texto+'</div>';
divfactura.innerHTML=textoT;
divfactura.hidden=false;
}





function compartir(){
const shareData = {
  title: 'Factura',
  text: Ftexto
}
//console.log(shareData);
comparte(shareData);
}

async function comparte(shareData){
  try {
    await navigator.share(shareData)
    console.log('MDN shared successfully');
  } catch(err) {
    console.log( 'Error: ' + err);
  }
}


function anula(){

for (var i=0;i<data.length;i++){
data[i][4]=0;
data[i][5]=0;
}
refresca();
}

function quitar(){
var div5 = document.getElementById("factura");
div5.hidden=true;
factflag=true;
}

function refresca(){
var patron=document.getElementById("search").value.toUpperCase();
var pb;
var pu;
t1=document.getElementById("t1").value;
t2=document.getElementById("t2").value;
localStorage.setItem('p1',t1);
localStorage.setItem('p2',t2);
texto="";
var factor;
var fm;
for (var i=0;i<data.length;i++){
if (data[i][0].toUpperCase().indexOf(patron) !=-1)   {
if (data[i][6]=="t1") {factor=t1;}
if (data[i][6]=="t2") {factor=t2;}
//console.log(i+" "+data[i][0]);
texto+='<p  >'+ data[i][0]+'</p>';
if (data[i][4]==0) {var vcor='black';} else {var vcor='blue';}
if (data[i][5]==0) {var vcor1='black';} else {var vcor1='blue';}
if (data[i][3]==1) {fm=1.16} else {fm=1}
//pu=Math.ceil(100*fm*data[i][2]/data[i][1])/100;
var pu=+(fm*data[i][2]/data[i][1]).toFixed(2);
var pb=+(fm*data[i][2]).toFixed(2);
//if (data[i][3]==1) {pb=pu*data[i][1];} else {pb=data[i][2];}
texto+='<table><tr><td> U '+(pu).toFixed(2)+' $' +'</td><td>'+ (pu*factor).toFixed(2)+ ' Bs <button class="btn2" style="color:'+vcor+';"'+'onclick="actU('+i+');">'+data[i][4]+'</button></td></tr>';
texto+='<tr><td> B '+(pb).toFixed(2)+' $'+'</td><td>'+ (pb*factor).toFixed(2)+ ' Bs <button class="btn2" style="color:'+vcor1+';"'+'onclick="actT('+i+');">'+data[i][5]+'</button></td></tr></table>';

   if (data[i][3]==1) {
    texto+="<span style='font-size:0.6em;'>Retenci&oacute;n T: "+(fm*data[i][2]/fiva).toFixed(2)+ " $ "+(fm*data[i][2]*factor/fiva).toFixed(2)+" Bs          </span>";
   }
}
}
texto+='<br><br>'
divt.innerHTML=texto;
}

function impri(A){
var At=A.toString();
var p=At.indexOf('.');
var num=At.substring(0,p);
var dec=At.substring(p+1,At.length);
//console.log(p+" "+num+" "+dec);
var B="";
var j=0;
var indfin=num.length
var porc=[];
while (indfin>0) {
porc[j]=num.substring(indfin-3,indfin);
indfin=indfin-3;
j=j+1;
}

for(var j=porc.length-1;j>0;j--)
{
B=B+porc[j]+".";
}
B=B+porc[0]+","+dec
//console.log(B);
return B;
}
impri(12356.3478);

</script>
<script>

// Registra el service worker
if ('serviceWorker' in navigator) {
  window.addEventListener('load', function() {
    navigator.serviceWorker.register('sw.js').then(function(registration) {
      // Si es exitoso
      console.log('SW registrado correctamente');
    }, function(err) {
      // Si falla
      console.log('SW fallo', err);
    });
  });
}
var myHeaders = new Headers();

var myInit = { mode: 'cors' };

//var nombrepag="https://monitordolarvenezuela.com/monitor-dolar-hoy";
var nombrepag="https://bdeabreu66.github.io/precios/precios.txt";


fetch(nombrepag,myInit)
        .then(ajaxPositive)
        .catch(showError);

function ajaxPositive(response) {
      console.log('response.ok: ', response.ok);
      if(response.ok) {
        response.text().then(showResult);
      } else {
        showError('status code: ' + response.status);
      }
    }
 function showResult(txt) {
        //console.log('muestro respuesta: ', txt);
        localStorage.setItem('data',txt);
        data=eval(txt);
        refresca();
  }

function showError(err) { 
      console.log('muestor error', err);
    }

//async function fetchHtmlAsText(url) {
//    return await (await fetch(url,myInit)).text();
//}

// this is your `load_home() function`
//var va=document.getElementById("t3").checked;
//console.log('checked '+va);
//if (va) {Actualiza_dolar();}

function Actualiza_dolar(){
var nomb="https://s3.amazonaws.com/dolartoday/data.json"
//var myHeaders = new Headers();
var myInit = { mode: 'cors' };

fetch(nomb,myInit)
        .then(ajaxPositiveD)
        .catch(showErrorD);

function ajaxPositiveD(response) {
      console.log('response.ok: ', response.ok);
      if(response.ok) {
        response.json().then(showResultD);
      } else {
        showErrorD('status code: ' + response.status);
      }
    }
 function showResultD(txt) {
       console.log('muestro respuesta: ', txt.USD.sicad2);
       document.getElementById("t1").value = txt.USD.promedio;
       document.getElementById("t2").value = txt.USD.sicad2;
       refresca();
  }

function showErrorD(err) { 
      console.log('muestor error', err);
    }

}
Fecha_precios();
function Fecha_precios(){
var nomb="https://s3.amazonaws.com/dolartoday/data.json"
var nomb="https://bdeabreu66.github.io/precios/fecha.txt";


//var myHeaders = new Headers();
var myInit = { mode: 'cors' };

fetch(nomb,myInit)
        .then(ajaxPositiveD)
        .catch(showErrorD);

function ajaxPositiveD(response) {
      console.log('response.ok: ', response.ok);
      if(response.ok) {
        response.json().then(showResultD);
      } else {
        showErrorD('status code: ' + response.status);
      }
    }
 function showResultD(txt) {
       console.log('fecha: '+ txt.dia+txt.mes+txt.ano);
      // document.getElementById("t1").value = txt.USD.promedio;
     //    document.getElementById("t2").value = txt.USD.sicad2;
      var fecha='('+txt.dia+'/'+txt.mes+'/'+txt.ano+')';
      document.getElementById("fecha_p").innerText=fecha;
      localStorage.setItem('FECHA_P',fecha);
  //  refresca();
  }

function showErrorD(err) { 
      console.log('muestor error', err);
    }

}


</script>
</BODY>
</html>